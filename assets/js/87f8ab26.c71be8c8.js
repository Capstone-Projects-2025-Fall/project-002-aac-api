"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[8979],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(96540);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}},71871:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"api-specification/example","title":"TicTacToe","description":"","source":"@site/docs/api-specification/example.mdx","sourceDirName":"api-specification","slug":"/api-specification/example","permalink":"/project-002-aac-api/docs/api-specification/example","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2025-Fall/project-002-aac-api/edit/main/documentation/docs/api-specification/example.mdx","tags":[],"version":"current","lastUpdatedBy":"Kieran Plenn","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"TicTacToe"},"sidebar":"docsSidebar","previous":{"title":"API 1 - Swagger Petstore","permalink":"/project-002-aac-api/docs/api-specification/openapi-spec"},"next":{"title":"Design Document: Basic API Initialization","permalink":"/project-002-aac-api/docs/api-specification/design-api-intro"}}');var o=t(74848),s=t(28453),i=t(94742);const a={sidebar_position:4,sidebar_label:"TicTacToe"},c="TicTacToe",d={},l=[];function p(e){const n={code:"code",h1:"h1",header:"header",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"tictactoe",children:"TicTacToe"})}),"\n",(0,o.jsx)("p",{children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="@site/src/components/TicTacToe/index.js"',children:"  const handleClick = (index) => {\n    const currentBoard = boardRef.current;\n    if (currentBoard[index] || winner) return;\n\n    const currentPlayer = playerRef.current;\n    console.log('Current player:', currentPlayer, 'Placing at index:', index);\n\n    // highlight-start\n    const newBoard = [...currentBoard];\n    newBoard[index] = currentPlayer;\n    setBoard(newBoard);\n    boardRef.current = newBoard;\n    // highlight-end\n\n    const positionName = getPositionName(index);\n    speak(`${currentPlayer} has been placed in ${positionName}`);\n\n    const gameWinner = checkWinner(newBoard);\n    if (gameWinner) {\n      console.log('Winner found:', gameWinner);\n      setWinner(gameWinner);\n      setTimeout(() => {\n        speak(`Player ${gameWinner} wins!`);\n      }, 1000);\n    } else if (newBoard.every(cell => cell !== '')) {\n      console.log('Draw - board is full');\n      setWinner('draw');\n      setTimeout(() => {\n        speak(\"It's a draw!\");\n      }, 1000);\n    } else {\n      const nextPlayer = currentPlayer === 'X' ? 'O' : 'X';\n      console.log('Switching from', currentPlayer, 'to', nextPlayer);\n      setPlayer(nextPlayer);\n      playerRef.current = nextPlayer;\n      setTimeout(() => {\n        speak(`It's ${nextPlayer}'s turn`);\n      }, 1500);\n    }\n  };\n"})})}),"\n",(0,o.jsx)(i.A,{}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="@site/src/components/TicTacToe/index.js"',children:"      const response = await fetch('http://localhost:8080/upload', {\n        method: 'POST',\n        body: formData\n      });\n\n      ...\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",metastring:'title="/Initial_API/index.js"',children:"            res.status(200).send({\n                message: 'Audio processed successfully',\n                transcription: result.trim(),\n                filename: req.file.originalname,\n                size: req.file.size + ' bytes'\n            });\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},94742:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(96540),o=t(74848);const s=()=>{const[e,n]=(0,r.useState)(["","","","","","","","",""]),[t,s]=(0,r.useState)("X"),[i,a]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[l,p]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!0),[h,f]=(0,r.useState)(""),[y,b]=(0,r.useState)([]),[w,C]=(0,r.useState)(null),[j,T]=(0,r.useState)(null),[S,v]=(0,r.useState)(null),k=(0,r.useRef)("X"),R=(0,r.useRef)(["","","","","","","","",""]),P=(0,r.useRef)(null),A=(0,r.useRef)([]),E=(0,r.useRef)(null),I=(0,r.useRef)(!1),N="http://localhost:8080",O=e=>{if("speechSynthesis"in window){const n=new SpeechSynthesisUtterance(e);n.rate=.9,n.pitch=1,speechSynthesis.speak(n)}},B=(e,n)=>{const t=(new Date).toLocaleTimeString(),r={id:Date.now(),timestamp:t,type:e,data:"string"==typeof n?n:JSON.stringify(n,null,2)};b((e=>[...e.slice(-9),r]))},z=async()=>{try{B("HEALTH",{action:"Checking API health..."});const e=await fetch(`${N}/health`),n=await e.json();return C(n),B("HEALTH",{status:n.status,uptime:n.uptimeFormatted,version:n.version,services:n.services}),"ok"===n.status}catch(h){return C({status:"error",error:h.message}),B("ERROR",{action:"Health check failed",error:h.message}),!1}};(0,r.useEffect)((()=>{z()}),[]);const M=e=>["top left","top center","top right","middle left","center","middle right","bottom left","bottom center","bottom right"][e],W={"top left":0,"top center":1,"top right":2,"middle left":3,center:4,"middle right":5,"bottom left":6,"bottom center":7,"bottom right":8,one:0,two:1,three:2,four:3,five:4,six:5,seven:6,eight:7,nine:8,1:0,2:1,3:2,4:3,5:4,6:5,7:6,8:7,9:8},$=async e=>{try{const n=await e.arrayBuffer(),t=new(window.AudioContext||window.webkitAudioContext),r=await t.decodeAudioData(n),o=D(r),s=new Blob([o],{type:"audio/wav"});return t.close(),s}catch(h){throw console.error("Error converting audio:",h),h}},D=e=>{const n=e.length*e.numberOfChannels*2+44,t=new ArrayBuffer(n),r=new DataView(t),o=[];let s=0,i=0;const a=e=>{r.setUint16(i,e,!0),i+=2},c=e=>{r.setUint32(i,e,!0),i+=4};c(1179011410),c(n-8),c(1163280727),c(544501094),c(16),a(1),a(e.numberOfChannels),c(e.sampleRate),c(2*e.sampleRate*e.numberOfChannels),a(2*e.numberOfChannels),a(16),c(1635017060),c(n-i-4);for(let d=0;d<e.numberOfChannels;d++)o.push(e.getChannelData(d));for(;i<n;){for(let n=0;n<e.numberOfChannels;n++){let e=Math.max(-1,Math.min(1,o[n][s]));e=e<0?32768*e:32767*e,r.setInt16(i,e,!0),i+=2}s++}return t},F=async e=>{try{const n=new FormData;n.append("audioFile",e,"recording.wav"),B("REQUEST",{method:"POST",url:`${N}/upload`,audioSize:`${e.size} bytes`,commandMode:g,headers:g?{"x-command-mode":"true"}:{}});const t={};g&&(t["x-command-mode"]="true");const r=await fetch(`${N}/upload`,{method:"POST",headers:t,body:n}),o=await r.json();if(console.log("API Response:",o),void 0!==o.confidence&&T(o.confidence),void 0!==o.processingTimeMs&&v(o.processingTimeMs),B("RESPONSE",{status:r.status,success:o.success,transcription:o.transcription,confidence:o.confidence?`${(100*o.confidence).toFixed(1)}%`:"N/A",service:o.service,processingTime:o.processingTimeMs?`${o.processingTimeMs}ms`:"N/A",aac:o.aac,wordTiming:o.wordTiming?.length?`${o.wordTiming.length} words`:"N/A"}),!o.success){const e=o.error?.message||"Unknown error",n=o.error?.code||"UNKNOWN";return console.error("API error:",n,e),void(u||(f(`${n}: ${e}`),d(!1)))}o.transcription?(console.log("Transcription:",o.transcription),((e,n)=>{console.log("Voice command:",e),f("");const t=n?.aac||{};B("COMMAND",{rawCommand:e,currentPlayer:k.current,commandType:t.commandType||"unknown",isCommand:t.isCommand||!1,confidence:n?.confidence});let r=W[e];if(void 0===r)for(const[o,s]of Object.entries(W))if(e.includes(o)){r=s;break}void 0!==r?(console.log("Moving to position:",r,"Current player:",k.current),B("ACTION",{action:"place_mark",position:r,player:k.current,positionName:M(r)}),U(r)):"new game"===e||"reset"===e||e.includes("new game")||e.includes("reset game")||e.includes("start over")?(B("ACTION",{action:"reset_game",command:e}),X()):e.includes("stop listening")||e.includes("stop")?(B("ACTION",{action:"stop_listening",command:e}),L()):e.includes("help")?B("ACTION",{action:"help",command:e}):(console.log("Command not recognized:",e),B("WARNING",{message:"Command not recognized",command:e,suggestion:"Try: top left, center, bottom right, new game"}),f(`Command not recognized: "${e}"`))})(o.transcription.toLowerCase().trim(),o)):u||f("No transcription received"),u||d(!1)}catch(h){console.error("Error sending audio to API:",h),B("ERROR",{action:"API request failed",error:h.message}),u||(f(`API Error: ${h.message}`),O("Error connecting to server"),d(!1))}},_=()=>{if(!E.current||!I.current)return;const e=new MediaRecorder(E.current);P.current=e,A.current=[],e.ondataavailable=e=>{e.data.size>0&&A.current.push(e.data)},e.onstop=async()=>{if(!I.current)return;const e=new Blob(A.current,{type:"audio/webm"});if(e.size>1e3){p(!1);try{const n=await $(e);await F(n)}catch(h){console.error("Error processing audio:",h),B("ERROR",{error:"Audio processing failed",message:h.message})}}I.current&&setTimeout(_,100)},e.start(),p(!0),setTimeout((()=>{"recording"===e.state&&e.stop()}),3e3)},L=()=>{I.current=!1,m(!1),d(!1),p(!1),"recording"===P.current?.state&&P.current.stop(),E.current&&(E.current.getTracks().forEach((e=>e.stop())),E.current=null),B("SYSTEM",{message:"Continuous listening stopped"})},U=e=>{const t=R.current;if(t[e]||i)return;const r=k.current,o=[...t];o[e]=r,n(o),R.current=o;M(e);const c=((e=R.current)=>{const n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[t,r,o]of n)if(e[t]&&e[t]===e[r]&&e[t]===e[o])return e[t];return null})(o);if(c)a(c),setTimeout((()=>O(`Player ${c} wins!`)),1e3);else if(o.every((e=>""!==e)))a("draw"),setTimeout((()=>O("It's a draw!")),1e3);else{const e="X"===r?"O":"X";s(e),k.current=e,setTimeout((()=>O(`${e}'s turn`)),1e3)}},X=()=>{const e=["","","","","","","","",""];n(e),R.current=e,s("X"),k.current="X",a(""),f(""),T(null),v(null)};(0,r.useEffect)((()=>()=>{E.current&&E.current.getTracks().forEach((e=>e.stop()))}),[]);const H=e=>({REQUEST:"#007bff",RESPONSE:"#28a745",COMMAND:"#6f42c1",ACTION:"#fd7e14",SYSTEM:"#17a2b8",HEALTH:"#20c997",WARNING:"#ffc107",ERROR:"#dc3545"}[e]||"#6c757d");return(0,o.jsxs)("div",{style:{textAlign:"center",fontFamily:"Arial, sans-serif",padding:"20px"},children:[(0,o.jsx)("h1",{style:{marginBottom:"10px"},children:"\ud83c\udfae Tic Tac Toe with Voice Control"}),(0,o.jsx)("p",{style:{color:"#666",marginBottom:"20px"},children:"AAC Board API Test Interface"}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"20px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,o.jsxs)("div",{style:{padding:"8px 16px",backgroundColor:"ok"===w?.status?"#d4edda":"#f8d7da",borderRadius:"20px",fontSize:"14px"},children:["API: ","ok"===w?.status?"\u2705 Connected":"\u274c Disconnected",w?.version&&` (v${w.version})`]}),null!==j&&(0,o.jsxs)("div",{style:{padding:"8px 16px",backgroundColor:j>.7?"#d4edda":j>.4?"#fff3cd":"#f8d7da",borderRadius:"20px",fontSize:"14px"},children:["Confidence: ",(100*j).toFixed(0),"%"]}),null!==S&&(0,o.jsxs)("div",{style:{padding:"8px 16px",backgroundColor:S<1e3?"#d4edda":"#fff3cd",borderRadius:"20px",fontSize:"14px"},children:["\u23f1\ufe0f ",S,"ms"]})]}),!i&&(0,o.jsxs)("h2",{children:["Current Player: ",t]}),i&&"draw"!==i&&(0,o.jsxs)("h2",{style:{color:"#28a745"},children:["\ud83c\udf89 Player ",i," wins!"]}),"draw"===i&&(0,o.jsx)("h2",{style:{color:"#ffc107"},children:"\ud83e\udd1d It's a draw!"}),(0,o.jsxs)("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"center",gap:"10px",flexWrap:"wrap"},children:[u?(0,o.jsx)("button",{onClick:L,style:{padding:"12px 24px",fontSize:"16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"\u23f9\ufe0f Stop Listening"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:async()=>{if(await z())try{f("");const e=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0}});E.current=e,I.current=!0,m(!0),d(!0),B("SYSTEM",{message:"Continuous listening started",commandMode:g}),_()}catch(h){console.error("Error accessing microphone:",h),f("Error accessing microphone")}else f("API is not available. Please start the server.")},style:{padding:"12px 24px",fontSize:"16px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"\ud83c\udfa4 Start Continuous"}),(0,o.jsx)("button",{onClick:async()=>{if(await z())try{f("");const e=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0}}),n=new MediaRecorder(e);P.current=n,A.current=[],n.ondataavailable=e=>{e.data.size>0&&A.current.push(e.data)},n.onstop=async()=>{const n=new Blob(A.current,{type:"audio/webm"});try{const e=await $(n);await F(e)}catch(h){console.error("Error processing audio:",h),f("Error processing audio"),d(!1)}e.getTracks().forEach((e=>e.stop()))},n.start(),d(!0),p(!0),O("Listening"),setTimeout((()=>{"recording"===P.current?.state&&(P.current.stop(),p(!1))}),4e3)}catch(h){console.error("Error accessing microphone:",h),f("Error accessing microphone")}else f("API is not available. Please start the server.")},disabled:c,style:{padding:"12px 24px",fontSize:"16px",backgroundColor:c?"#cccccc":"#2196F3",color:"white",border:"none",borderRadius:"8px",cursor:c?"not-allowed":"pointer"},children:l?"\ud83d\udd34 Recording...":"\ud83c\udf99\ufe0f Single Command"})]}),(0,o.jsx)("button",{onClick:X,style:{padding:"12px 24px",fontSize:"16px",backgroundColor:"#ff9800",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"\ud83d\udd04 New Game"}),(0,o.jsx)("button",{onClick:z,style:{padding:"12px 24px",fontSize:"16px",backgroundColor:"#9c27b0",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"\ud83d\udd0d Check API"})]}),(0,o.jsx)("div",{style:{marginBottom:"20px"},children:(0,o.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"8px 16px",backgroundColor:g?"#e3f2fd":"#f5f5f5",borderRadius:"8px",border:"2px solid "+(g?"#2196F3":"#ddd")},children:[(0,o.jsx)("input",{type:"checkbox",checked:g,onChange:e=>x(e.target.checked),style:{width:"18px",height:"18px"}}),(0,o.jsxs)("span",{children:[(0,o.jsx)("strong",{children:"AAC Command Mode"}),(0,o.jsx)("br",{}),(0,o.jsx)("small",{style:{color:"#666"},children:"Optimized for short commands"})]})]})}),u&&(0,o.jsxs)("p",{style:{color:"#4CAF50",fontWeight:"bold",fontSize:"18px"},children:["ALWAYS LISTENING - ",l?"\ud83d\udd34 Recording...":"\u23f3 Processing..."]}),c&&!u&&(0,o.jsxs)("p",{style:{color:"#2196F3",fontWeight:"bold"},children:["\ud83c\udfa4 ",l?"Recording... (4 seconds)":"Processing..."]}),h&&(0,o.jsxs)("p",{style:{color:"#dc3545",backgroundColor:"#f8d7da",padding:"10px 20px",borderRadius:"8px",display:"inline-block"},children:["\u26a0\ufe0f ",h]}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 100px)",gap:"5px",justifyContent:"center",margin:"20px auto"},children:e.map(((e,n)=>(0,o.jsx)("button",{onClick:()=>U(n),style:{width:"100px",height:"100px",fontSize:e?"36px":"11px",fontWeight:e?"bold":"normal",border:"2px solid #333",backgroundColor:e?"X"===e?"#e3f2fd":"#fce4ec":"white",cursor:e||i?"not-allowed":"pointer",color:e?"X"===e?"#1976d2":"#c2185b":"#999",borderRadius:"8px",transition:"all 0.2s"},disabled:!!e||!!i,children:e||["top left","top center","top right","middle left","center","middle right","bottom left","bottom center","bottom right"][n]},n)))}),(0,o.jsxs)("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"#1e1e1e",border:"1px solid #333",borderRadius:"8px",maxWidth:"900px",margin:"30px auto",textAlign:"left"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[(0,o.jsx)("h3",{style:{margin:0,color:"#fff",fontSize:"16px"},children:"\ud83d\udce1 API Log"}),(0,o.jsx)("button",{onClick:()=>b([]),style:{padding:"4px 12px",fontSize:"12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",cursor:"pointer"},children:"Clear"})]}),(0,o.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto"},children:0===y.length?(0,o.jsx)("p",{style:{color:"#666",fontStyle:"italic",margin:0},children:"No API activity yet. Try using voice commands!"}):y.map((e=>(0,o.jsxs)("div",{style:{marginBottom:"8px",padding:"8px 12px",backgroundColor:"#2d2d2d",borderLeft:`3px solid ${H(e.type)}`,borderRadius:"4px",fontFamily:"Monaco, Consolas, monospace",fontSize:"12px"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[(0,o.jsx)("span",{style:{color:H(e.type),fontWeight:"bold"},children:e.type}),(0,o.jsx)("span",{style:{color:"#666"},children:e.timestamp})]}),(0,o.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",color:"#d4d4d4"},children:e.data})]},e.id)))})]}),(0,o.jsxs)("div",{style:{marginTop:"20px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",maxWidth:"600px",margin:"20px auto"},children:[(0,o.jsx)("h4",{style:{margin:"0 0 10px 0"},children:"\ud83d\udde3\ufe0f Voice Commands"}),(0,o.jsxs)("p",{style:{margin:"5px 0",color:"#555"},children:[(0,o.jsx)("strong",{children:"Positions:"}),' "top left", "center", "bottom right", etc.']}),(0,o.jsxs)("p",{style:{margin:"5px 0",color:"#555"},children:[(0,o.jsx)("strong",{children:"Numbers:"}),' "one" through "nine" (1-9)']}),(0,o.jsxs)("p",{style:{margin:"5px 0",color:"#555"},children:[(0,o.jsx)("strong",{children:"Control:"}),' "new game", "reset", "stop listening", "help"']})]})]})}}}]);