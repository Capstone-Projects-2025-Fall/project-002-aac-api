"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[1460],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var r=s(96540);const d={},i=r.createContext(d);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),r.createElement(i.Provider,{value:n},e.children)}},82015:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"api-specification/design-api-intro","title":"Design Document: AAC Speech Recognition API","description":"Description:","source":"@site/docs/api-specification/design-api-intro.md","sourceDirName":"api-specification","slug":"/api-specification/design-api-intro","permalink":"/project-002-aac-api/docs/api-specification/design-api-intro","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2025-Fall/project-002-aac-api/edit/main/documentation/docs/api-specification/design-api-intro.md","tags":[],"version":"current","lastUpdatedBy":"AceShadowKnight","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"TicTacToe","permalink":"/project-002-aac-api/docs/api-specification/example"},"next":{"title":"Test Procedures","permalink":"/project-002-aac-api/docs/category/test-procedures"}}');var d=s(74848),i=s(28453);const l={},t="Design Document: AAC Speech Recognition API",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Purpose",id:"purpose",level:3},{value:"Modules and Fields",id:"modules-and-fields",level:2},{value:"Middleware",id:"middleware",level:2},{value:"JSON Parser",id:"json-parser",level:3},{value:"CORS",id:"cors",level:3},{value:"Request Timing Middleware",id:"request-timing-middleware",level:3},{value:"File Upload (Multer)",id:"file-upload-multer",level:3},{value:"Helper Functions",id:"helper-functions",level:2},{value:"parseUserAgent(ua)",id:"parseuseragentua",level:3},{value:"detectAudioFormat(filename)",id:"detectaudioformatfilename",level:3},{value:"logRequest(data, consentGiven)",id:"logrequestdata-consentgiven",level:3},{value:"buildSuccessResponse(params)",id:"buildsuccessresponseparams",level:3},{value:"buildErrorResponse(params)",id:"builderrorresponseparams",level:3},{value:"parsePythonOutput(stdout)",id:"parsepythonoutputstdout",level:3},{value:"Server Initialization",id:"server-initialization",level:2},{value:"Purpose",id:"purpose-1",level:3},{value:"Success Response Example",id:"success-response-example",level:3},{value:"Purpose",id:"purpose-2",level:3},{value:"Success Response",id:"success-response",level:3},{value:"Purpose",id:"purpose-3",level:3},{value:"Headers",id:"headers",level:3},{value:"Form Fields (multipart/form-data)",id:"form-fields-multipartform-data",level:3},{value:"Successful Response Example",id:"successful-response-example",level:3},{value:"Error Responses",id:"error-responses",level:3},{value:"No file uploaded (400)",id:"no-file-uploaded-400",level:4},{value:"Python backend error (422)",id:"python-backend-error-422",level:4},{value:"File too large (413)",id:"file-too-large-413",level:4},{value:"Internal server error (500)",id:"internal-server-error-500",level:4},{value:"Status Codes",id:"status-codes",level:3},{value:"Response",id:"response",level:3},{value:"Example: File too large",id:"example-file-too-large",level:3},{value:"Example: Unexpected error",id:"example-unexpected-error",level:3},{value:"Summary Table",id:"summary-table",level:2},{value:"Notes",id:"notes",level:2}];function a(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"design-document-aac-speech-recognition-api",children:"Design Document: AAC Speech Recognition API"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Description:"}),(0,d.jsx)(n.br,{}),"\n","This document provides the complete design for the ",(0,d.jsx)(n.strong,{children:"AAC Board Speech Recognition API"}),", including module/class purposes, data fields, methods, routes, pre/post conditions, parameters, exceptions, and helper utilities."]}),"\n",(0,d.jsxs)(n.p,{children:["The API is built with ",(0,d.jsx)(n.strong,{children:"Express.js"}),", supports audio upload and speech recognition via Python backends, and is optimized for ",(0,d.jsx)(n.strong,{children:"Augmentative and Alternative Communication (AAC)"})," devices."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,d.jsx)(n.p,{children:"This software implements a robust speech-to-text REST API with:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Multiple speech-recognition backends (e.g., Google Speech API, offline Vosk)"}),"\n",(0,d.jsx)(n.li,{children:"Command mode for AAC command recognition"}),"\n",(0,d.jsx)(n.li,{children:"Word-level timing metadata"}),"\n",(0,d.jsx)(n.li,{children:"camelCase JSON responses"}),"\n",(0,d.jsx)(n.li,{children:"Health and capability endpoints"}),"\n",(0,d.jsx)(n.li,{children:"Consent-based logging of audio metadata"}),"\n",(0,d.jsx)(n.li,{children:"Fallback and tolerant JSON parsing of Python output"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"purpose",children:"Purpose"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Provide a reliable speech recognition endpoint for AAC devices."}),"\n",(0,d.jsx)(n.li,{children:"Expose system health information for device connectivity."}),"\n",(0,d.jsx)(n.li,{children:"Support multiple audio formats and command modes."}),"\n",(0,d.jsx)(n.li,{children:"Serve as a modern, extensible foundation for AAC-focused speech recognition systems."}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"modules-and-fields",children:"Modules and Fields"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Purpose"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"express"})}),(0,d.jsx)(n.td,{children:"Module"}),(0,d.jsx)(n.td,{children:"Main HTTP framework for routing and middleware."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"multer"})}),(0,d.jsx)(n.td,{children:"Module"}),(0,d.jsx)(n.td,{children:"Parses audio uploads via multipart/form-data."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"cors"})}),(0,d.jsx)(n.td,{children:"Module"}),(0,d.jsx)(n.td,{children:"Enables cross-origin requests (important for AAC devices)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"fs"})}),(0,d.jsx)(n.td,{children:"Module"}),(0,d.jsx)(n.td,{children:"File system access for logs and script validation."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"spawn"})}),(0,d.jsx)(n.td,{children:"Module"}),(0,d.jsx)(n.td,{children:"Executes Python speech recognition backend."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"path"})}),(0,d.jsx)(n.td,{children:"Module"}),(0,d.jsx)(n.td,{children:"File path resolution."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"app"})}),(0,d.jsx)(n.td,{children:"Object"}),(0,d.jsx)(n.td,{children:"Express instance for routes and middleware."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"PORT"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsxs)(n.td,{children:["API port (",(0,d.jsx)(n.code,{children:"8080"})," default, environment override supported)."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"upload"})}),(0,d.jsx)(n.td,{children:"Multer Instance"}),(0,d.jsx)(n.td,{children:"Memory-based upload handler (10MB limit)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"LOG_DIR"})}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{children:"Directory used for daily JSON log files."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SPEECH_SCRIPT"})}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{children:"Path to Python speech recognition script."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SUPPORTED_FORMATS"})}),(0,d.jsx)(n.td,{children:"Array<String>"}),(0,d.jsx)(n.td,{children:"Allowed audio formats."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SERVER_START_TIME"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:"Millisecond timestamp for uptime calculations."})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"middleware",children:"Middleware"}),"\n",(0,d.jsx)(n.h3,{id:"json-parser",children:"JSON Parser"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"app.use(express.json());\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Purpose:"})," Automatically parses incoming JSON request bodies.\n",(0,d.jsx)(n.strong,{children:"Pre-condition:"})," Body must be valid JSON when JSON is expected.\n",(0,d.jsx)(n.strong,{children:"Post-condition:"})," Parsed JSON becomes available via ",(0,d.jsx)(n.code,{children:"req.body"}),"."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"cors",children:"CORS"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"app.use(cors());\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Purpose:"})," Enables cross-origin access from AAC devices (web apps, tablets, mobile apps)."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"request-timing-middleware",children:"Request Timing Middleware"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"app.use((req, res, next) => {\n    req.startTime = Date.now();\n    next();\n});\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Purpose:"})," Tracks request processing time for diagnostics and response metadata."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"file-upload-multer",children:"File Upload (Multer)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"const upload = multer({\n    storage: multer.memoryStorage(),\n    limits: { fileSize: 10 * 1024 * 1024 }\n});\n"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Files stored in memory, not on disk."}),"\n",(0,d.jsxs)(n.li,{children:["Maximum size: ",(0,d.jsx)(n.strong,{children:"10MB"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["Used only for the ",(0,d.jsx)(n.code,{children:"/upload"})," endpoint."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Exceptions:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"LIMIT_FILE_SIZE"})," handled by global error handler \u2192 returns ",(0,d.jsx)(n.strong,{children:"413"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["Missing file handled manually \u2192 returns ",(0,d.jsx)(n.strong,{children:"400"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"helper-functions",children:"Helper Functions"}),"\n",(0,d.jsx)(n.h3,{id:"parseuseragentua",children:"parseUserAgent(ua)"}),"\n",(0,d.jsx)(n.p,{children:"Extracts browser + device info for diagnostics."}),"\n",(0,d.jsx)(n.h3,{id:"detectaudioformatfilename",children:"detectAudioFormat(filename)"}),"\n",(0,d.jsxs)(n.p,{children:["Returns audio format from file extension (default ",(0,d.jsx)(n.code,{children:'"WAV"'}),")."]}),"\n",(0,d.jsx)(n.h3,{id:"logrequestdata-consentgiven",children:"logRequest(data, consentGiven)"}),"\n",(0,d.jsx)(n.p,{children:"Writes request metadata to a daily JSON log file when allowed."}),"\n",(0,d.jsx)(n.h3,{id:"buildsuccessresponseparams",children:"buildSuccessResponse(params)"}),"\n",(0,d.jsx)(n.p,{children:"Standard camelCase success response wrapper."}),"\n",(0,d.jsx)(n.h3,{id:"builderrorresponseparams",children:"buildErrorResponse(params)"}),"\n",(0,d.jsx)(n.p,{children:"Standard camelCase error response wrapper."}),"\n",(0,d.jsx)(n.h3,{id:"parsepythonoutputstdout",children:"parsePythonOutput(stdout)"}),"\n",(0,d.jsxs)(n.p,{children:["Parses JSON output from Python script.\nSupports both ",(0,d.jsx)(n.strong,{children:"camelCase"})," and old ",(0,d.jsx)(n.strong,{children:"PascalCase"})," formats."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"server-initialization",children:"Server Initialization"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"app.listen(PORT, () => {\n    // Styled console startup banner\n});\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Purpose:"})," Starts the Express.js server and prints endpoint help.\n",(0,d.jsx)(n.strong,{children:"Exceptions:"})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"EADDRINUSE"})," if another process occupies the port."]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h1,{id:"routes-and-methods",children:"Routes and Methods"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h1,{id:"get-health",children:"GET /health"}),"\n",(0,d.jsx)(n.h3,{id:"purpose-1",children:"Purpose"}),"\n",(0,d.jsx)(n.p,{children:"System health, supported formats, uptime, and status of Python backend.\nDesigned for AAC device connectivity checks."}),"\n",(0,d.jsx)(n.h3,{id:"success-response-example",children:"Success Response Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "status": "ok",\n  "timestamp": "2025-01-01T00:00:00Z",\n  "uptime": 1234,\n  "uptimeFormatted": "0h 20m 34s",\n  "version": "2.0.0",\n  "services": {\n    "speechRecognition": true,\n    "logging": true\n  },\n  "supportedFormats": ["WAV","MP3","FLAC","AIFF","OGG","M4A","RAW","PCM"],\n  "endpoints": {\n    "health": "/health",\n    "upload": "/upload",\n    "formats": "/formats"\n  }\n}\n'})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Exceptions:"})," None."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h1,{id:"get-formats",children:"GET /formats"}),"\n",(0,d.jsx)(n.h3,{id:"purpose-2",children:"Purpose"}),"\n",(0,d.jsx)(n.p,{children:"Returns audio formats supported by the API and recommended settings for lowest latency."}),"\n",(0,d.jsx)(n.h3,{id:"success-response",children:"Success Response"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "supportedFormats": [...],\n  "optimal": {\n    "format": "WAV",\n    "sampleRate": 16000,\n    "bitDepth": 16,\n    "channels": 1\n  },\n  "notes": [\n    "WAV format recommended for lowest latency",\n    "16kHz sample rate optimal",\n    "Mono audio preferred",\n    "Raw PCM supported with x-sample-rate header"\n  ]\n}\n'})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Exceptions:"})," None."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h1,{id:"post-upload",children:"POST /upload"}),"\n",(0,d.jsx)(n.h3,{id:"purpose-3",children:"Purpose"}),"\n",(0,d.jsx)(n.p,{children:"Uploads audio for AAC-optimized speech recognition and returns:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Transcription"}),"\n",(0,d.jsx)(n.li,{children:"Confidence values"}),"\n",(0,d.jsx)(n.li,{children:"Processing metadata"}),"\n",(0,d.jsx)(n.li,{children:"AAC command detection"}),"\n",(0,d.jsx)(n.li,{children:"Word timing array"}),"\n",(0,d.jsx)(n.li,{children:"User & device metadata"}),"\n",(0,d.jsx)(n.li,{children:"Audio metadata"}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"headers",children:"Headers"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Header"}),(0,d.jsx)(n.th,{children:"Purpose"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"x-user-id"})}),(0,d.jsx)(n.td,{children:"Optional user ID"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"x-session-id"})}),(0,d.jsx)(n.td,{children:"Fallback ID"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"x-logging-consent"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:'"true"'})," \u2192 enable request logging"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"x-command-mode"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:'"true"'})," \u2192 AAC command recognition"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"x-sample-rate"})}),(0,d.jsx)(n.td,{children:"For RAW/PCM audio only"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"form-fields-multipartform-data",children:"Form Fields (multipart/form-data)"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Field"}),(0,d.jsx)(n.th,{children:"Type"}),(0,d.jsx)(n.th,{children:"Required"}),(0,d.jsx)(n.th,{children:"Description"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"audioFile"})}),(0,d.jsx)(n.td,{children:"File"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"Audio data"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"commandMode"})}),(0,d.jsx)(n.td,{children:"Bool"}),(0,d.jsx)(n.td,{children:"\u2716"}),(0,d.jsx)(n.td,{children:"Alternative to header"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"userId"})}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{children:"\u2716"}),(0,d.jsx)(n.td,{children:"Alternative to header"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"successful-response-example",children:"Successful Response Example"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "transcription": "hello world",\n  "confidence": 0.92,\n  "service": "Google",\n  "processingTimeMs": 320,\n  "audio": {\n    "filename": "speech.wav",\n    "size": 10240,\n    "format": "WAV",\n    "duration": 1.23,\n    "sampleRate": 16000,\n    "channels": 1\n  },\n  "request": {\n    "timestamp": "2025-01-01T00:00:00Z",\n    "device": "Mobile",\n    "browser": "Chrome",\n    "userAgent": "Mozilla/5.0 ..."\n  },\n  "aac": {\n    "commandMode": true,\n    "commandType": "navigation",\n    "isCommand": true\n  },\n  "wordTiming": [\n    { "word": "hello", "start": 0.0, "end": 0.4 },\n    { "word": "world", "start": 0.5, "end": 0.9 }\n  ]\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"error-responses",children:"Error Responses"}),"\n",(0,d.jsx)(n.h4,{id:"no-file-uploaded-400",children:"No file uploaded (400)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "NO_FILE",\n    "message": "No audio file uploaded"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h4,{id:"python-backend-error-422",children:"Python backend error (422)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "AUDIO_ERROR",\n    "message": "Could not read audio"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h4,{id:"file-too-large-413",children:"File too large (413)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "FILE_TOO_LARGE",\n    "message": "Audio file exceeds maximum size (10MB)"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h4,{id:"internal-server-error-500",children:"Internal server error (500)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "INTERNAL_ERROR",\n    "message": "An unexpected error occurred"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"status-codes",children:"Status Codes"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Status"}),(0,d.jsx)(n.th,{children:"Meaning"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"200"})}),(0,d.jsx)(n.td,{children:"Successful recognition"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"400"})}),(0,d.jsx)(n.td,{children:"Missing/invalid inputs"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"413"})}),(0,d.jsx)(n.td,{children:"File too large"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"422"})}),(0,d.jsx)(n.td,{children:"Python-recognition error"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"500"})}),(0,d.jsx)(n.td,{children:"Server/internal failure"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h1,{id:"404-handler",children:"404 Handler"}),"\n",(0,d.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "NOT_FOUND",\n    "message": "Endpoint GET /foobar not found"\n  },\n  "availableEndpoints": {\n    "GET /health": "Health check and status",\n    "GET /formats": "Supported audio formats",\n    "POST /upload": "Transcription endpoint"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h1,{id:"global-error-handler",children:"Global Error Handler"}),"\n",(0,d.jsx)(n.h3,{id:"example-file-too-large",children:"Example: File too large"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "FILE_TOO_LARGE",\n    "message": "Audio file exceeds maximum size (10MB)"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"example-unexpected-error",children:"Example: Unexpected error"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "INTERNAL_ERROR",\n    "message": "An unexpected error occurred"\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"summary-table",children:"Summary Table"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Method"}),(0,d.jsx)(n.th,{children:"Endpoint"}),(0,d.jsx)(n.th,{children:"Description"}),(0,d.jsx)(n.th,{children:"Success Response"}),(0,d.jsx)(n.th,{children:"Error Response"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/health"})}),(0,d.jsx)(n.td,{children:"Returns server status & uptime"}),(0,d.jsx)(n.td,{children:"Status metadata"}),(0,d.jsx)(n.td,{children:"N/A"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"GET"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/formats"})}),(0,d.jsx)(n.td,{children:"Lists supported audio formats"}),(0,d.jsx)(n.td,{children:"Format list"}),(0,d.jsx)(n.td,{children:"N/A"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"POST"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/upload"})}),(0,d.jsx)(n.td,{children:"Audio \u2192 transcription"}),(0,d.jsx)(n.td,{children:"Full transcription response"}),(0,d.jsx)(n.td,{children:"400, 413, 422, 500"})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Run from this directory with:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"node .\n"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Test suite:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"npm test\n"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["Logging only occurs with consent (",(0,d.jsx)(n.code,{children:"x-logging-consent: true"}),")."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["Python backend (",(0,d.jsx)(n.code,{children:"speechRecognition.py"}),") must exist and be executable."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["Recommended audio settings: ",(0,d.jsx)(n.strong,{children:"WAV, 16kHz, mono"}),"."]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"End of Document"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}}}]);