"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[8979],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var r=n(96540);const o={},i=r.createContext(o);function s(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:t},e.children)}},71871:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"api-specification/example","title":"TicTacToe","description":"","source":"@site/docs/api-specification/example.mdx","sourceDirName":"api-specification","slug":"/api-specification/example","permalink":"/project-002-aac-api/docs/api-specification/example","draft":false,"unlisted":false,"editUrl":"https://github.com/Capstone-Projects-2025-Fall/project-002-aac-api/edit/main/documentation/docs/api-specification/example.mdx","tags":[],"version":"current","lastUpdatedBy":"TheBigMo","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"TicTacToe"},"sidebar":"docsSidebar","previous":{"title":"API 1 - Swagger Petstore","permalink":"/project-002-aac-api/docs/api-specification/openapi-spec"},"next":{"title":"Design Document: Basic API Initialization","permalink":"/project-002-aac-api/docs/api-specification/design-api-intro"}}');var o=n(74848),i=n(28453),s=n(94742);const a={sidebar_position:4,sidebar_label:"TicTacToe"},c="TicTacToe",l={},d=[];function p(e){const t={code:"code",h1:"h1",header:"header",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"tictactoe",children:"TicTacToe"})}),"\n",(0,o.jsx)("p",{children:(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:'title="@site/src/components/TicTacToe/index.js"',children:"  const handleClick = (index) => {\n    const currentBoard = boardRef.current;\n    if (currentBoard[index] || winner) return;\n\n    const currentPlayer = playerRef.current;\n    console.log('Current player:', currentPlayer, 'Placing at index:', index);\n\n    // highlight-start\n    const newBoard = [...currentBoard];\n    newBoard[index] = currentPlayer;\n    setBoard(newBoard);\n    boardRef.current = newBoard;\n    // highlight-end\n\n    const positionName = getPositionName(index);\n    speak(`${currentPlayer} has been placed in ${positionName}`);\n\n    const gameWinner = checkWinner(newBoard);\n    if (gameWinner) {\n      console.log('Winner found:', gameWinner);\n      setWinner(gameWinner);\n      setTimeout(() => {\n        speak(`Player ${gameWinner} wins!`);\n      }, 1000);\n    } else if (newBoard.every(cell => cell !== '')) {\n      console.log('Draw - board is full');\n      setWinner('draw');\n      setTimeout(() => {\n        speak(\"It's a draw!\");\n      }, 1000);\n    } else {\n      const nextPlayer = currentPlayer === 'X' ? 'O' : 'X';\n      console.log('Switching from', currentPlayer, 'to', nextPlayer);\n      setPlayer(nextPlayer);\n      playerRef.current = nextPlayer;\n      setTimeout(() => {\n        speak(`It's ${nextPlayer}'s turn`);\n      }, 1500);\n    }\n  };\n"})})}),"\n",(0,o.jsx)(s.A,{}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:'title="@site/src/components/TicTacToe/index.js"',children:"      const response = await fetch('http://localhost:8080/upload', {\n        method: 'POST',\n        body: formData\n      });\n\n      ...\n"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:'title="/Initial_API/index.js"',children:"            res.status(200).send({\n                message: 'Audio processed successfully',\n                transcription: result.trim(),\n                filename: req.file.originalname,\n                size: req.file.size + ' bytes'\n            });\n"})})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},94742:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(96540),o=n(74848);const i=()=>{const[e,t]=(0,r.useState)(["","","","","","","","",""]),[n,i]=(0,r.useState)("X"),[s,a]=(0,r.useState)(""),[c,l]=(0,r.useState)(!1),[d,p]=(0,r.useState)(!1),[u,m]=(0,r.useState)(""),[g,h]=(0,r.useState)([]),[f,x]=(0,r.useState)(!1),y=(0,r.useRef)("X"),w=(0,r.useRef)(["","","","","","","","",""]),b=(0,r.useRef)(null),S=(0,r.useRef)([]),T=((0,r.useRef)(null),(0,r.useRef)(null)),j=(0,r.useRef)(!1),C=e=>{if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=.8,t.pitch=1}},R=(e,t)=>{const n=(new Date).toLocaleTimeString(),r={id:Date.now(),timestamp:n,type:e,data:JSON.stringify(t,null,2)};h((e=>[...e.slice(-4),r]))},P=e=>["top left","top center","top right","middle left","center","middle right","bottom left","bottom center","bottom right"][e],k=async e=>{try{const t=await e.arrayBuffer(),n=new(window.AudioContext||window.webkitAudioContext),r=await n.decodeAudioData(t),o=v(r),i=new Blob([o],{type:"audio/wav"});return n.close(),i}catch(u){throw console.error("Error converting audio:",u),u}},v=e=>{const t=e.length*e.numberOfChannels*2+44,n=new ArrayBuffer(t),r=new DataView(n),o=[];let i=0,s=0;const a=e=>{r.setUint16(s,e,!0),s+=2},c=e=>{r.setUint32(s,e,!0),s+=4};c(1179011410),c(t-8),c(1163280727),c(544501094),c(16),a(1),a(e.numberOfChannels),c(e.sampleRate),c(2*e.sampleRate*e.numberOfChannels),a(2*e.numberOfChannels),a(16),c(1635017060),c(t-s-4);for(let l=0;l<e.numberOfChannels;l++)o.push(e.getChannelData(l));for(;s<t;){for(let t=0;t<e.numberOfChannels;t++){let e=Math.max(-1,Math.min(1,o[t][i]));e=e<0?32768*e:32767*e,r.setInt16(s,e,!0),s+=2}i++}return n},E=()=>{if(!T.current||!j.current)return;const e=new MediaRecorder(T.current);b.current=e,S.current=[],e.ondataavailable=e=>{e.data.size>0&&S.current.push(e.data)},e.onstop=async()=>{if(!j.current)return;const e=new Blob(S.current,{type:"audio/webm"});if(e.size>1e3){p(!1);try{const t=await k(e);await I(t)}catch(u){console.error("Error processing audio:",u),R("ERROR",{error:"Audio processing failed",message:u.message})}}j.current&&setTimeout((()=>{E()}),100)},e.start(),p(!0),setTimeout((()=>{"recording"===e.state&&e.stop()}),3e3)},A=()=>{j.current=!1,x(!1),l(!1),p(!1),b.current&&"recording"===b.current.state&&b.current.stop(),T.current&&(T.current.getTracks().forEach((e=>e.stop())),T.current=null),C("Continuous listening stopped"),R("SYSTEM",{message:"Continuous listening mode stopped",timestamp:(new Date).toISOString()})},I=async e=>{try{const t=new FormData;t.append("audioFile",e,"recording.wav"),console.log("Sending audio to API...","Size:",e.size,"bytes"),R("REQUEST",{method:"POST",url:"http://localhost:8080/upload",contentType:"multipart/form-data",audioSize:`${e.size} bytes`,filename:"recording.wav"});const n=await fetch("http://localhost:8080/upload",{method:"POST",body:t}),r=await n.json();if(console.log("API Response:",r),R("RESPONSE",{status:n.status,statusText:n.statusText,data:r}),300===n.status)return console.error("Python script error:",r.error),void(f||(m(`Processing failed: ${r.error||"Unknown error"}`),C("Audio processing failed"),l(!1)));if(!n.ok)throw new Error(`API returned status ${n.status}: ${r.message||"Unknown error"}`);r.transcription?(console.log("Transcription:",r.transcription),(e=>{console.log("Voice command:",e),m(""),R("COMMAND",{rawCommand:e,currentPlayer:y.current,timestamp:(new Date).toISOString()});const t={"top left":0,"top center":1,"top right":2,"middle left":3,center:4,"middle right":5,"bottom left":6,"bottom center":7,"bottom right":8,one:0,two:1,three:2,four:3,five:4,six:5,seven:6,eight:7,nine:8,1:0,2:1,3:2,4:3,5:4,6:5,7:6,8:7,9:8};let n=t[e];if(void 0===n)for(const[r,o]of Object.entries(t))if(e.includes(r)){n=o;break}void 0!==n?(console.log("Moving to position:",n,"Current player:",y.current),R("ACTION",{action:"place_mark",position:n,player:y.current,positionName:P(n)}),O(n)):"new game"===e||"reset"===e||e.includes("new game")||e.includes("reset game")?(console.log("Resetting game"),R("ACTION",{action:"reset_game",command:e}),z()):e.includes("stop listening")?(R("ACTION",{action:"stop_listening",command:e}),A()):(console.log("Command not recognized:",e),R("ERROR",{error:"Command not recognized",command:e}),m(`Command not recognized: "${e}"`))})(r.transcription.toLowerCase().trim())):f||(m("No transcription received"),C("No transcription received")),f||l(!1)}catch(u){console.error("Error sending audio to API:",u),f||(m(`API Error: ${u.message}`),C("Error processing audio"),l(!1))}},O=e=>{const n=w.current;if(n[e]||s)return;const r=y.current;console.log("Current player:",r,"Placing at index:",e);const o=[...n];o[e]=r,t(o),w.current=o;const c=P(e);C(`${r} has been placed in ${c}`);const l=((e=w.current)=>{const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[r,o,i]=t[n];if(e[r]&&e[r]===e[o]&&e[r]===e[i])return e[r]}return null})(o);if(l)console.log("Winner found:",l),a(l),setTimeout((()=>{C(`Player ${l} wins!`)}),1e3);else if(o.every((e=>""!==e)))console.log("Draw - board is full"),a("draw"),setTimeout((()=>{C("It's a draw!")}),1e3);else{const e="X"===r?"O":"X";console.log("Switching from",r,"to",e),i(e),y.current=e,setTimeout((()=>{C(`It's ${e}'s turn`)}),1500)}},z=()=>{const e=["","","","","","","","",""];t(e),w.current=e,i("X"),y.current="X",a(""),m(""),h([]),C("New game started. It's X's turn")};return(0,r.useEffect)((()=>()=>{T.current&&T.current.getTracks().forEach((e=>e.stop()))}),[]),(0,o.jsxs)("div",{style:{textAlign:"center",fontFamily:"Arial"},children:[(0,o.jsx)("h1",{children:"Tic Tac Toe with Voice Control"}),!s&&(0,o.jsxs)("h2",{children:["Current Player: ",n]}),s&&"draw"!==s&&(0,o.jsxs)("h2",{children:["Player ",s," wins!"]}),"draw"===s&&(0,o.jsx)("h2",{children:"It's a draw!"}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[f?(0,o.jsx)("button",{onClick:A,style:{padding:"10px 20px",fontSize:"16px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginRight:"10px"},children:"Stop Continuous Listening"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:async()=>{try{m("");const e=await navigator.mediaDevices.getUserMedia({audio:!0});T.current=e,j.current=!0,x(!0),l(!0),C("Continuous listening activated. I'm always listening for your commands."),R("SYSTEM",{message:"Continuous listening mode started",timestamp:(new Date).toISOString()}),E()}catch(u){console.error("Error accessing microphone:",u),m("Error accessing microphone"),C("Error accessing microphone")}},style:{padding:"10px 20px",fontSize:"16px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginRight:"10px"},children:"Start Continuous Listening"}),(0,o.jsx)("button",{onClick:async()=>{try{m("");const e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);b.current=t,S.current=[],t.ondataavailable=e=>{e.data.size>0&&S.current.push(e.data)},t.onstop=async()=>{const t=new Blob(S.current,{type:"audio/webm"});try{const e=await k(t);await I(e)}catch(u){console.error("Error processing audio:",u),m("Error processing audio"),C("Error processing audio"),l(!1)}e.getTracks().forEach((e=>e.stop()))},t.start(),l(!0),p(!0),C("Listening for voice commands"),setTimeout((()=>{b.current&&"recording"===b.current.state&&(b.current.stop(),p(!1))}),5e3)}catch(u){console.error("Error accessing microphone:",u),m("Error accessing microphone"),C("Error accessing microphone")}},disabled:c,style:{padding:"10px 20px",fontSize:"16px",backgroundColor:c?"#cccccc":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:c?"not-allowed":"pointer",marginRight:"10px"},children:d?"Recording...":"Single Command"})]}),(0,o.jsx)("button",{onClick:z,style:{padding:"10px 20px",fontSize:"16px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"New Game"})]}),f&&(0,o.jsxs)("p",{style:{color:"#4CAF50",fontWeight:"bold"},children:["\ud83c\udfa4 ALWAYS LISTENING - ",d?"Recording...":"Processing..."]}),c&&!f&&(0,o.jsxs)("p",{style:{color:"red"},children:["\ud83c\udfa4 ",d?"Recording... (3 seconds)":"Processing..."]}),u&&(0,o.jsxs)("p",{style:{color:"orange",fontSize:"14px",marginTop:"10px"},children:["\u26a0\ufe0f ",u]}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 100px)",gap:"5px",justifyContent:"center",margin:"20px auto"},children:e.map(((e,t)=>(0,o.jsx)("button",{onClick:()=>O(t),style:{width:"100px",height:"100px",fontSize:e?"30px":"12px",border:"2px solid black",backgroundColor:"white",cursor:e||s?"not-allowed":"pointer",color:e?"black":"#999"},disabled:e||s,children:e||["top left","top center","top right","middle left","center","middle right","bottom left","bottom center","bottom right"][t]},t)))}),(0,o.jsxs)("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",maxWidth:"800px",margin:"30px auto"},children:[(0,o.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#333",fontSize:"18px"},children:"\ud83d\udd0d API Input/Output Log"}),0===g.length?(0,o.jsx)("p",{style:{color:"#666",fontStyle:"italic"},children:"No API interactions yet. Try using voice commands!"}):(0,o.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.map((e=>(0,o.jsxs)("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"white",border:"1px solid #e9ecef",borderRadius:"4px",fontSize:"12px"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,o.jsx)("span",{style:{fontWeight:"bold",color:"REQUEST"===e.type?"#007bff":"RESPONSE"===e.type?"#28a745":"COMMAND"===e.type?"#6f42c1":"ACTION"===e.type?"#fd7e14":"SYSTEM"===e.type?"#17a2b8":"ERROR"===e.type?"#dc3545":"#6c757d"},children:e.type}),(0,o.jsx)("span",{style:{color:"#666",fontSize:"11px"},children:e.timestamp})]}),(0,o.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"11px",color:"#333"},children:e.data})]},e.id)))})]}),(0,o.jsxs)("div",{style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:[(0,o.jsx)("p",{children:"Voice Commands:"}),(0,o.jsx)("p",{children:'"top left", "center", "bottom right", "new game"'}),(0,o.jsx)("p",{style:{fontSize:"12px",marginTop:"10px",fontStyle:"italic"},children:"Continuous mode: Always listening - just speak your commands!"})]})]})}}}]);